# Game engine 21

- 3d block-based world
  - play mostly in one plane
  - depth broken into parallax layers in predetermined places
  - multi-tile entities
  - variable-sized rooms w/ neighbors a la D4
- compressed JSON for storage
  - world stored as a hash tre
    - indirect references (using UUIDs and sequential IDs)
      between most objects
    - tree maps as dictionaries f
- BUILD A NICE 2.5D TILE EDITOR
  - block references 'visual representation'
  - visual representation indicates shape ID and material map ID
  - shape indicates heightfield and material map indexes for each pixel
    - 4 'stain' variations on each material for minor color variation
  - edit one sprite sheet at a time, export to blocks
  - no need to pre-bake transformations
  - allow editing milti-tile images to define related tiles such as pipes
- auto-generated data classes (if any), [de]serialization routines
  - NO BEHAVIOR defined by data classes!




Inspirational tunes:
Sinespree-Groove2-04mix.mp3


## Networking as part of the game

World may be distributed across multiple servers.

Each room is part of a room group; each room group is simulated on its own [virtual] roomgroup server.

Links between rooms of different groups may introduce additional latency and look special in the game.
Players, resources, signals, etc, can pass through these portals just as they would pass anywhere else, but with potential for lots of latency.

When moving physical objects between room groups, a transaction occurs:
- Group A sends request to group B asking if the move may happen
- Group B sends accept/reject response.
- If successful, group A removes the object.

All steps are recorded in the a transaction log unique to the two room groups.

Updates on objects within rooms at the border of a group may be broadcast to adjacent roomgroup servers.


To reduce latency, roomgroups may have uplink points within them that
players can use.

At beginning of game, there should an uplink point connected to a
long-range wireless router so that players don't need to build a bunch
of infrastructure right away.  To move into distant areas requires
autonomous robots or networking
